var FM_PopupManagerView,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},hasProp={}.hasOwnProperty;FM_PopupManagerView=function(superClass){extend(FM_PopupManagerView,superClass);function FM_PopupManagerView(){return FM_PopupManagerView.__super__.constructor.apply(this,arguments)}FM_PopupManagerView.prototype.events=[["mousedown","[data-trigger-popup]","triggerPopup"],["mousedown","[data-close-popup]","hidePopup"]];FM_PopupManagerView.prototype.callbacks={hasPopupAccess:function(){return true},onBeforePopupTrigger:function(){}};FM_PopupManagerView.prototype.init=function($el,callbacks){this.$el=$el;if(callbacks){$.extend(true,this.callbacks,callbacks)}return this.bindView()};FM_PopupManagerView.prototype.triggerPopup=function($trigger){this.callbacks.onBeforePopupTrigger($trigger);return this.loadPopup($trigger.attr("data-trigger-popup"))};FM_PopupManagerView.prototype.loadPopup=function(popup,timeout){if(this.callbacks.hasPopupAccess(popup)){return setTimeout(function(_this){return function(){return _this.displayPopup(popup)}}(this),timeout||0)}};FM_PopupManagerView.prototype.displayPopup=function(popup){var $newPopup;this.hidePopup();$newPopup=this.$el.find("[data-popup='"+popup+"']");return this.buildOverlay().insertBefore($newPopup).fadeIn(200,function(_this){return function(){return $newPopup.attr("data-show",true)}}(this))};FM_PopupManagerView.prototype.buildOverlay=function(){return $("<div/>",{"class":"overlay"})};FM_PopupManagerView.prototype.hidePopup=function(){this.$el.find(".overlay").fadeOut(300,function(){return $(this).remove()});return this.$el.find("[data-popup]").attr("data-show",false)};return FM_PopupManagerView}(BaseView);